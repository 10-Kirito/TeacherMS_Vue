"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[67],{6067:function(e,a,l){l.r(a),l.d(a,{default:function(){return o}});var t=function(){var e=this,a=e._self._c;return a("div",[e._m(0),a("div",{staticStyle:{margin:"10px 0"}},[a("el-input",{staticStyle:{width:"290px"},attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入课程号"},model:{value:e.searchInfo.classId,callback:function(a){e.$set(e.searchInfo,"classId",a)},expression:"searchInfo.classId"}}),a("el-input",{staticStyle:{width:"290px","margin-left":"5px"},attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入课程名"},model:{value:e.searchInfo.className,callback:function(a){e.$set(e.searchInfo,"className",a)},expression:"searchInfo.className"}}),a("el-input",{staticStyle:{width:"290px","margin-left":"5px"},attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入课程学分"},model:{value:e.searchInfo.classScore,callback:function(a){e.$set(e.searchInfo,"classScore",a)},expression:"searchInfo.classScore"}}),a("el-input",{staticStyle:{width:"290px","margin-left":"5px"},attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入教师姓名"},model:{value:e.searchInfo.teacherName,callback:function(a){e.$set(e.searchInfo,"teacherName",a)},expression:"searchInfo.teacherName"}}),[a("el-select",{staticStyle:{width:"290px","margin-left":"5px"},attrs:{placeholder:"请选择所属学院"},model:{value:e.searchInfo.departName,callback:function(a){e.$set(e.searchInfo,"departName",a)},expression:"searchInfo.departName"}},e._l(e.options,(function(e){return a("el-option",{key:e,attrs:{value:e}})})),1)]],2),a("div",{staticStyle:{margin:"10px 0"}},[a("el-button",{staticStyle:{width:"90px"},attrs:{type:"primary"},on:{click:e.load}},[e._v("查询")]),a("el-button",{staticStyle:{"margin-left":"5px",width:"90px"},attrs:{type:"danger"},on:{click:e.reset}},[e._v("重置")])],1),a("el-table",{attrs:{data:e.classData,"row-style":{height:"30px"},"header-cell-style":{background:"#ADD8E6",color:"#606266"},border:"",stripe:"","header-cell-class-name":"headerBg"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"classId",label:"课程号"}}),a("el-table-column",{attrs:{prop:"className",label:"课程名"}}),a("el-table-column",{attrs:{prop:"score",label:"学分",width:"60px"}}),a("el-table-column",{attrs:{prop:"teacherId",label:"教师号",width:"80px"}}),a("el-table-column",{attrs:{prop:"teacherName",label:"教师姓名"}}),a("el-table-column",{attrs:{prop:"position",label:"教师职称"}}),a("el-table-column",{attrs:{prop:"time",label:"上课时间"}}),a("el-table-column",{attrs:{prop:"location",label:"上课地点"}}),a("el-table-column",{attrs:{prop:"capacity",label:"容量",width:"60px"}}),a("el-table-column",{attrs:{prop:"enrollment",label:"人数",width:"60px"}}),a("el-table-column",{attrs:{prop:"questionTime",label:"答疑时间"}}),a("el-table-column",{attrs:{prop:"departName",label:"所属学院"}})],1),a("div",{staticStyle:{margin:"10px 0"}},[a("el-button",{staticStyle:{width:"90px"},attrs:{type:"primary"},on:{click:e.putData}},[e._v("确定")])],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("div",{staticClass:"grid-content"},[e._v(" 当前页:"+e._s(e.pageNum)+", 总页数:"+e._s(e.pageSize)+", 总行数:"+e._s(e.total)+" ")])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"grid-content"},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,30,40],"page-size":e.pageSize,background:"",layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])],1),a("el-row",[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-table",{attrs:{data:e.selectedData,"header-cell-style":{background:"#ADD8E6",color:"#606266"},border:"",stripe:"","header-cell-class-name":"headerBg"}},[a("el-table-column",{attrs:{type:"index",index:e.indexMethod,label:"#",width:"40px",align:"center"}}),a("el-table-column",{attrs:{prop:"className",label:"课程名"}}),a("el-table-column",{attrs:{prop:"classId",label:"课程号",width:"100px"}}),a("el-table-column",{attrs:{prop:"teacherId",label:"教师号",width:"100px",align:"center"}}),a("el-table-column",{attrs:{prop:"teacherName",label:"教师号",width:"100px"}}),a("el-table-column",{attrs:{prop:"time",label:"教师号"}}),a("el-table-column",{attrs:{prop:"score",label:"学分",width:"50px",align:"center"}})],1)],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-table",{attrs:{data:e.tableData,"header-cell-style":{background:"#ADD8E6",color:"#606266"},border:"",stripe:"","header-cell-class-name":"headerBg"}},[a("el-table-column",{attrs:{prop:"orderNumber",label:"#",width:"40px"}}),a("el-table-column",{attrs:{prop:"time",label:"上课时间",width:"100px"}}),a("el-table-column",{attrs:{prop:"weekArray.monday",label:"一",width:"80px"}}),a("el-table-column",{attrs:{prop:"weekArray.tuesday",label:"二",width:"80px"}}),a("el-table-column",{attrs:{prop:"weekArray.wednesday",label:"三",width:"80px"}}),a("el-table-column",{attrs:{prop:"weekArray.thursday",label:"四",width:"80px"}}),a("el-table-column",{attrs:{prop:"weekArray.friday",label:"五",width:"80px"}}),a("el-table-column",{attrs:{prop:"weekArray.saturday",label:"六",width:"78px"}}),a("el-table-column",{attrs:{prop:"weekArray.sunday",label:"日",width:"80px"}})],1)],1)])],1)],1)},s=[function(){var e=this,a=e._self._c;return a("div",{staticStyle:{margin:"5px 0"}},[a("h1",[e._v("查询条件")])])}],r=l(6369),n={inject:["reload"],name:"selectClass",data(){return{user:{birthday:null,departId:null,gender:null,nativePlace:null,phoneNumber:null,state:null,studentId:null,studentName:null},searchInfo:{classId:null,className:null,classScore:null,teacherName:null,departName:null},classData:[],selectedData:[],allTime:[],total:0,pageNum:1,pageSize:10,tableData:[{orderNumber:1,time:"8:00-8:45",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:2,time:"8:55-9:40",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:3,time:"10:00-10:45",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:4,time:"10:55-11.40",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:5,time:"13:00-13:45",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:6,time:"13:55-14:40",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:7,time:"15:00-15:45",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:8,time:"15:55-16:40",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:9,time:"18:00-18:45",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:10,time:"18:55-19:40",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:11,time:"20:00-20:45",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}},{orderNumber:12,time:"20:55-21:40",weekArray:{monday:null,tuesday:null,wednesday:null,thursday:null,friday:null,saturday:null,sunday:null}}],testData:["三1-3,四3-4","五1-4,二7-10,一1-12"],testClass:[{classId:"08305124",className:"计算机系统结构",score:4,teacherId:1001,teacherName:"沈文枫",time:"三1-3,四3-4",location:"材料222",questionTime:"一7-8",school:"宝山"},{classId:"08305124",className:"计算机系统结构",score:4,teacherId:1001,teacherName:"沈文枫",time:"三1-3,四3-4",location:"材料222",questionTime:"一7-8",school:"宝山"},{classId:"08305124",className:"计算机系统结构",score:4,teacherId:1001,teacherName:"沈文枫",time:"三1-3,四3-4",location:"材料222",questionTime:"一7-8",school:"宝山"}],options:[],multipleSelection:[]}},async created(){await this.getUser(),await this.load(),await this.getAllClassTime(),await this.handleData()},methods:{getUser(){const e=JSON.parse(localStorage.getItem("userInfo"));e&&r["default"].set(this,"user",e)},load(){this.request.get("/department/allName").then((e=>{this.options=e})),this.getClassData(),this.getAllClass()},async getAllClassTime(){await this.request.get("/select-class/student/allTime",{params:{studentId:this.user.studentId}}).then((e=>{this.allTime=e.data}))},getAllClass(){this.getUser(),this.request.get("/select-class/student/selected",{params:{studentId:this.user.studentId}}).then((e=>{this.selectedData=e.data}))},getClassData(){this.request.get("/open-class/pages",{params:{currentPage:this.pageNum,pageSize:this.pageSize,classId:this.searchInfo.classId,className:this.searchInfo.className,teacherName:this.searchInfo.teacherName,classScore:this.searchInfo.classScore,departName:this.searchInfo.departName}}).then((e=>{this.classData=e.records,this.total=e.total}))},reset(){this.searchInfo={},this.load()},handleData(){let e=64;for(let a=0;a<this.allTime.length;a++){let l=this.allTime[a].split("，");e++,this.subHandleData(l,String.fromCharCode(e))}},subHandleData(e,a){for(let l=0;l<e.length;l++){let t=e[l].split("-");this.fillData(t[0].charAt(0),t[0].charAt(1),t[1],a)}},fillData(e,a,l,t){switch(e){case"一":for(let e=parseInt(a);e<=parseInt(l);e++)this.tableData[e-1].weekArray.monday=t;break;case"二":for(let e=parseInt(a);e<=parseInt(l);e++)this.tableData[e-1].weekArray.tuesday=t;break;case"三":for(let e=parseInt(a);e<=parseInt(l);e++)this.tableData[e-1].weekArray.wednesday=t;break;case"四":for(let e=parseInt(a);e<=parseInt(l);e++)this.tableData[e-1].weekArray.thursday=t;break;case"五":for(let e=parseInt(a);e<=parseInt(l);e++)this.tableData[e-1].weekArray.friday=t;break}},indexMethod(e){e++;let a=64+e;return String.fromCharCode(a)},handleSizeChange(e){this.pageSize=e,this.load()},handleCurrentChange(e){this.pageNum=e,this.load()},handleSelectionChange(e){this.multipleSelection=e},putData(){if(0!=this.multipleSelection.length){const e=encodeURIComponent(JSON.stringify(this.user)),a=encodeURIComponent(JSON.stringify(this.multipleSelection));this.request.get("/select-class/student/select",{params:{encodeStudent:e,encodeData:a}}).then((e=>{"BAD_REQUEST"==e.code?this.$message.error(e.msg):this.$message.success(e.msg)}))}this.multipleSelection=[],this.reload()},clearTable(){for(let e=0;e<12;e++)this.tableData[e].weekArray={}}}},u=n,d=l(1001),i=(0,d.Z)(u,t,s,!1,null,"3aa28d24",null),o=i.exports}}]);
//# sourceMappingURL=67.933496f4.js.map