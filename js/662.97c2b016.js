"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[662],{8662:function(e,a,t){t.r(a),t.d(a,{default:function(){return c}});var s=function(){var e=this,a=e._self._c;return a("div",[a("h1",[e._v("当前所有开放的课程:")]),a("div",{staticStyle:{margin:"10px 0"}},[a("el-input",{staticStyle:{width:"290px"},attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入课程号"},model:{value:e.searchInfo.classId,callback:function(a){e.$set(e.searchInfo,"classId",a)},expression:"searchInfo.classId"}}),a("el-input",{staticStyle:{width:"290px","margin-left":"5px"},attrs:{"suffix-icon":"el-icon-search",placeholder:"请输入课程名"},model:{value:e.searchInfo.className,callback:function(a){e.$set(e.searchInfo,"className",a)},expression:"searchInfo.className"}}),[a("el-select",{staticStyle:{width:"290px","margin-left":"5px"},attrs:{placeholder:"请选择所属学院"},model:{value:e.searchInfo.departName,callback:function(a){e.$set(e.searchInfo,"departName",a)},expression:"searchInfo.departName"}},e._l(e.options,(function(e){return a("el-option",{key:e,attrs:{value:e}})})),1)],a("el-button",{staticStyle:{"margin-left":"5px",width:"100px"},attrs:{type:"primary"},on:{click:e.load}},[e._v("搜索")]),a("el-button",{staticStyle:{"margin-left":"5px",width:"100px"},attrs:{type:"danger"},on:{click:e.reset}},[e._v("重置")])],2),a("el-table",{attrs:{data:e.tableData,border:"",stripe:"","header-cell-class-name":"headerBg"}},[a("el-table-column",{attrs:{prop:"classId",label:"课程号"}}),a("el-table-column",{attrs:{prop:"className",label:"课程名"}}),a("el-table-column",{attrs:{prop:"departName",label:"所属学院"}}),a("el-table-column",{attrs:{width:"300px",label:"相关操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("查看已分配老师 "),a("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"2px"}})]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.handleDel(t.row)}}},[e._v("删除 "),a("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-left":"2px"}})])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"课程分配",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(a){e.dialogFormVisible=a}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(a){e.dialogFormVisible=!1}}},[e._v("退出")])],1)]},proxy:!0}])},[a("h1",[e._v("已分配老师信息:")]),a("br"),a("el-table",{attrs:{data:e.assignTeachers,border:"",stripe:"","header-cell-class-name":"headerBg"}},[a("el-table-column",{attrs:{prop:"teacherId",label:"教师号",width:"80px"}}),a("el-table-column",{attrs:{prop:"teacherName",label:"教师名",width:"80px"}}),a("el-table-column",{attrs:{prop:"position",label:"职称",width:"80px"}}),a("el-table-column",{attrs:{prop:"departName",label:"所属院系"}}),a("el-table-column",{attrs:{width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.cancelAssign(t.row)}}},[e._v("取消分配"),a("i",{staticClass:"el-icon-circle-close",staticStyle:{"margin-left":"2px"}})])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":e.pagaNum_1,"page-sizes":[5,10,15,20],"page-size":e.pageSize_1,layout:"total, sizes, prev, pager, next, jumper",total:e.total_1},on:{"size-change":e.handleSizeChange_1,"current-change":e.handleCurrentChange_1}})],1),a("br"),a("h1",[e._v("未分配老师信息:")]),a("br"),a("el-table",{attrs:{data:e.unAssignTeachers,border:"",stripe:"","header-cell-class-name":"headerBg"}},[a("el-table-column",{attrs:{prop:"teacherId",label:"教师号",width:"80px"}}),a("el-table-column",{attrs:{prop:"teacherName",label:"教师名",width:"80px"}}),a("el-table-column",{attrs:{prop:"position",label:"职称",width:"80px"}}),a("el-table-column",{attrs:{prop:"departName",label:"所属院系"}}),a("el-table-column",{attrs:{width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success"},on:{click:function(a){return e.assignTeacher(t.row)}}},[e._v("分配该课程"),a("i",{staticClass:"el-icon-circle-check",staticStyle:{"margin-left":"2px"}})])]}}])})],1),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":e.pagaNum_2,"page-sizes":[5,10,15,20],"page-size":e.pageSize_2,layout:"total, sizes, prev, pager, next, jumper",total:e.total_2},on:{"size-change":e.handleSizeChange_2,"current-change":e.handleCurrentChange_2}})],1)],1)],1)},l=[],n={inject:["reload"],name:"OpenClass",data(){return{tableData:[],total:0,pageNum:1,pageSize:10,total_1:0,pagaNum_1:1,pageSize_1:5,total_2:0,pagaNum_2:1,pageSize_2:5,searchInfo:{classId:null,className:null,departName:null},dialogFormVisible:!1,addInfo:{classId:"",className:"",teacherName:"",classScore:null,classTime:null,departId:null},options:[],assignTeachers:[],unAssignTeachers:[]}},created(){this.load()},methods:{load(){this.request.get("/open-class/allOpenClass/pages",{params:{currentPage:this.pageNum,pageSize:this.pageSize,classId:this.searchInfo.classId,className:this.searchInfo.className,departName:this.searchInfo.departName}}).then((e=>{console.log(e),this.tableData=e.records,this.total=e.total})),this.request.get("/department/allName").then((e=>{this.options=e}))},reset(){this.pageNum=1,this.pagaNum_1=1,this.pagaNum_2=1,this.searchInfo.classId="",this.searchInfo.className="",this.searchInfo.departName=null,this.load()},cancelAssign(e){console.log(e),console.log(this.addInfo),this.request.get("/open-class/addOpenClass/cancelAssign",{params:{classRecord:this.addInfo.classRecord,teacherId:e.teacherId}}).then((e=>{console.log(e),"SUCCESS"==e.code&&this.$message.success(e.msg),this.reload()}))},assignTeacher(e){console.log(e),console.log(this.addInfo),this.request.get("/open-class/addOpenClass/assignTeacher",{params:{classRecord:this.addInfo.classRecord,teacherId:e.teacherId}}).then((e=>{console.log(e),"SUCCESS"==e.code&&this.$message.success(e.msg),this.reload()}))},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pageSize=e,this.load()},handleSizeChange_1(e){console.log(`每页 ${e} 条`),this.pageSize_1=e,this.getAllAssignTeachers()},handleSizeChange_2(e){console.log(`每页 ${e} 条`),this.pageSize_2=e,this.getAllUnAssignTeachers()},handleCurrentChange(e){console.log(`当前页: ${e}`),this.pageNum=e,this.load()},handleCurrentChange_1(e){console.log(`当前页: ${e}`),this.pagaNum_1=e,this.getAllAssignTeachers()},handleCurrentChange_2(e){console.log(`当前页: ${e}`),this.pagaNum_2=e,this.getAllUnAssignTeachers()},handleDel(e){this.$confirm("取消开设本课程, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.addInfo=e,console.log(e),console.log(this.addInfo.classRecord),this.request.get("/open-class/delOpenClass",{params:{classRecord:this.addInfo.classRecord}}).then((e=>{"SUCCESS"==e.code&&this.$message.success(e.msg),this.reload()}))})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleEdit(e){this.addInfo=e,this.dialogFormVisible=!0,this.getAllAssignTeachers(),this.getAllUnAssignTeachers()},getAllAssignTeachers(){console.log(this.pagaNum_1),console.log(this.pageSize_1),this.request.get("open-class/allAssignTeacher",{params:{currentPage:this.pagaNum_1,pageSize:this.pageSize_1,classId:this.addInfo.classId,departName:this.addInfo.departName}}).then((e=>{this.assignTeachers=e.records,console.log(e),this.total_1=e.total}))},getAllUnAssignTeachers(){console.log(this.pagaNum_2),console.log(this.pageSize_2),this.request.get("open-class/allUnAssignTeacher",{params:{currentPage:this.pagaNum_2,pageSize:this.pageSize_2,classId:this.addInfo.classId,departName:this.addInfo.departName}}).then((e=>{this.unAssignTeachers=e.records,console.log(e),this.total_2=e.total}))}}},o=n,i=t(1001),r=(0,i.Z)(o,s,l,!1,null,"73c20efe",null),c=r.exports}}]);
//# sourceMappingURL=662.97c2b016.js.map